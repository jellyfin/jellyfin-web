.spinner-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;

    display: none;
    // IMPORTANT
    // It seems counter-intuitive to define Flexbox rules (align-items, justify-content) on an element
    // that is simultaneously set to display: none.
    // However, these centering rules **must** exist on the base .spinner-container
    // to prevent the spinner from abruptly jumping to the top-left corner (top:0, left:0) during the fade-out.

    // By placing align-items and justify-content on the base container, we ensure the rules are
    // **parsed and ready** by the browser. When the transition occurs (from display: flex to display: none),
    // the element temporarily loses the active 'display: flex' setting (from the active class).
    // Keeping the centering rules on the base container guarantees they are immediately reapplied
    // the moment 'display: flex' is briefly active during the transition's lifespan.

    // This configuration, combined with transition-behavior: allow-discrete and the step-end timing,
    // allows the container to maintain its centered position and fade out gracefully before finally switching to display: none.
    // Works on all Chromium Browsers.

    // TODO: Firefox doesn't apply the fade out properly and ends without fading
    align-items: center;
    justify-content: center;

    // Initial State (Opacity & Pointer-Events)
    opacity: 0;
    pointer-events: none; // We allow users to click other UI elements

    transition-property: opacity, display, overlay;
    transition-duration: 0.5s; // Duration matches the fade time
    transition-behavior: allow-discrete; // Enables smooth display/none transition

    &.spinner-is-active {
        display: flex; // Instantly enables flex (discrete transition happens here)
        opacity: 1; // Smoothly fades in over 0.5s
        pointer-events: none; // We allow users to click other UI elements, we could use auto for blocking which is the common practice, but as the spinner is used in a lot of places like music libraries we don't want to prevent users from clicking other UI elements
        align-items: center;
        justify-content: center;
    }

    &.is-hiding {
        opacity: 0;
        pointer-events: none; // We allow users to click other UI elements

        // Delay the display: none change until the END of the 0.5s transition.
        transition: opacity 0.5s ease, display 0.8s step-end;
        display: none;
    }

    &.custom-jellyfin-logo-spinner {
        svg {
            width: 120px;
            height: 120px;
            overflow: visible; // Prevents clipping when rotating

            .spinner-outer-triangle {
                transform-origin: 36px 43.33px; // Ensure we spin the geometric center
                animation: spin-outer 2s cubic-bezier(0.4, 0, 0.2, 1) infinite;
            }

            .spinner-inner-triangle {
                transform-origin: 36px 40.93px; // Ensure we spin the geometric center
                animation: pulse-inner 2s cubic-bezier(0.2, 0, 0, 1) infinite; // Emphasized bezier curve for responsive, material 3-like feel
            }
        }
    }
}

@keyframes spin-outer {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

@keyframes pulse-inner {
    0% { transform: rotate(0deg) scale(1); }
    50% { transform: rotate(-180deg) scale(0.6); }
    100% { transform: rotate(-360deg) scale(1); }
}
